import cv2
import sys
import pytesseract
import Database



def getStringInRect(x,y,width,height):
  imPath = "images/page_1.png"  
  # Uncomment the line below to provide path to tesseract manually
  # pytesseract.pytesseract.tesseract_cmd = '/usr/bin/tesseract'
 
  # Define config parameters.
  # '-l eng'  for using the English language
  # '--oem 1' for using LSTM OCR Engine
  config = ('-l eng --oem 1 --psm 3')
 
  # Read image from disk
  im = cv2.imread(imPath, cv2.IMREAD_COLOR)

  crop_img = im[y:y+height, x:x+width]
  text = pytesseract.image_to_string(crop_img, config=config)
  return text

def plotSquare(x,y,width,height):
  imPath = "images/page_1.png"  
  # Uncomment the line below to provide path to tesseract manually
  # pytesseract.pytesseract.tesseract_cmd = '/usr/bin/tesseract'
 
  # Define config parameters.
  # '-l eng'  for using the English language
  # '--oem 1' for using LSTM OCR Engine
  config = ('-l eng --oem 1 --psm 3')
 
  # Read image from disk
  im = cv2.imread(imPath, cv2.IMREAD_COLOR)
  cv2.rectangle(im, (x, y), (x+width, y+height), (255,0,0), 2)
  cv2.imwrite("my.png",im)
  cv2.imshow("lalala", im)

def findStringInRange(strFind,x,y,maxWidth,maxHeight):
  width = 10
  height = 10

  while height < maxHeight:
    width = 10
    while width < maxWidth:
      strTmpText = getStringInRect(x,y,width,height)
      if strTmpText == strFind:
        return x,y,width,height
      else:
        width = width + 5
    height = height + 5


if __name__ == '__main__':
 
  if len(sys.argv) < 1:
    print('Usage: python ocr_simple.py image.jpg')
    sys.exit(1)

strTmpText = "Contributions, gifts, grants, etc , received "
#plotSquare(10,430,790,25)
text =  getStringInRect(10,430,790,25)
print(text)
print("---------------------------------------------------------------------------------------")

# #plotSquare(460,0,60,900)
# text =  getStringInRect(0,460,900,60)
# print(text)
# print("---------------------------------------------------------------------------------------")

# #plotSquare(0,520,890,20)
# text =  getStringInRect(0,520,890,20)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(0,550,320,30)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(0,600,310,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(0,710,360,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# text =  getStringInRect(380,700,600,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# text =  getStringInRect(500,780,280,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# text =  getStringInRect(930,780,150,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(80,1000,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(1000,1000,30,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# text =  getStringInRect(80,1040,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# text =  getStringInRect(80,1080,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# text =  getStringInRect(80,1150,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(80,1120,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(900,1120,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(1130,1120,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(80,1160,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(900,1160,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(1130,1155,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(80,1240,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(900,1240,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(80,1320,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(1130,1320,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(70,1550,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1554,130,40)
# text =  getStringInRect(900,1554,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(1130,1554,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# text =  getStringInRect(70,1600,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1600,130,40)
# text =  getStringInRect(900,1600,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# text =  getStringInRect(1130,1600,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,1635,700,40)
# text =  getStringInRect(70,1635,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1640,130,40)
# text =  getStringInRect(900,1640,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1640,130,40)
# text =  getStringInRect(1130,1640,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,1640,130,40)
# text =  getStringInRect(1540,1640,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,1675,700,40)
# text =  getStringInRect(70,1675,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1680,130,40)
# text =  getStringInRect(900,1680,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1680,130,40)
# text =  getStringInRect(1130,1680,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,1680,130,40)
# text =  getStringInRect(1540,1680,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,1715,700,40)
# text =  getStringInRect(70,1715,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1720,130,40)
# text =  getStringInRect(900,1720,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1720,130,40)
# text =  getStringInRect(1130,1720,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,1720,130,40)
# text =  getStringInRect(1130,1720,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,1755,700,40)
# text =  getStringInRect(70,1755,700,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1760,130,40)
# text =  getStringInRect(900,1760,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1760,130,40)
# text =  getStringInRect(1130,1760,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1330,1760,130,40)
# text =  getStringInRect(1330,1760,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


# plotSquare(1540,1760,130,40)
# text =  getStringInRect(1540,1760,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(100,1795,680,40)
# text =  getStringInRect(100,1795,680,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1800,130,40)
# text =  getStringInRect(900,1800,130,40)
# print(text)1130,1800,130,40
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1800,130,40)
# text =  getStringInRect(1130,1800,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1330,1800,130,40)
# text =  getStringInRect(1330,1800,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,1800,130,40)
# text =  getStringInRect(1540,1800,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(100,1835,680,40)
# text =  getStringInRect(100,1835,680,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1840,130,40)
# text =  getStringInRect(900,1840,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1840,130,40)
# text =  getStringInRect(1130,1840,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,1840,130,40)
# text =  getStringInRect(1540,1840,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,1875,713,40)
# text =  getStringInRect(70,1875,713,40)
# print(text)
# print("-----------------------------------------------------------------------------------------")

# plotSquare(900,1880,130,40)
# text =  getStringInRect(900,1880,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1880,130,40)
# text =  getStringInRect(1130,1880,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,1880,130,40)
# text =  getStringInRect(1540,1880,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,1915,713,40)
# text =  getStringInRect(70,1915,713,45)
# print(text)
# print("-----------------------------------------------------------------------------------------")

# plotSquare(900,1920,130,40)
# text =  getStringInRect(900,1880,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1130,1920,130,40)
# text =  getStringInRect(1130,1920,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,1920,130,40)
# text =  getStringInRect(1540,1920,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,1960,713,40)
# text =  getStringInRect(70,1960,713,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,1960,130,40)
# text =  getStringInRect(900,1960,130,40)
# print(text)
# print("-----------------------------------------------------------------------------------------")

# plotSquare(1130,1960,130,40)
# text =  getStringInRect(1130,1960,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,2000,713,40)
# text =  getStringInRect(70,2000,713,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,2000,130,40)
# text =  getStringInRect(900,2000,130,40)
# print(text)
# print("-----------------------------------------------------------------------------------------")

# plotSquare(1130,2000,130,40)
# text =  getStringInRect(1130,2000,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,2003,130,40)  
# text =  getStringInRect(1540,2003,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,2040,713,40)
# text =  getStringInRect(70,2040,713,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,2040,130,40)
# text =  getStringInRect(900,2040,130,40)
# print(text)
# print("-----------------------------------------------------------------------------------------")

# plotSquare(1130,2040,130,40)
# text =  getStringInRect(1130,2000,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,2043,130,40)
# text =  getStringInRect(1540,2043,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,2080,713,40)
# text =  getStringInRect(70,2080,713,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(900,2080,130,40)
# text =  getStringInRect(900,2080,130,40)
# print(text)
# print("-----------------------------------------------------------------------------------------")

# plotSquare(1130,2080,130,40)
# text =  getStringInRect(1130,2080,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,2083,130,40)
# text =  getStringInRect(1540,2083,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,2080,713,40)
# text =  getStringInRect(70,2080,713,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# #plotSquare(70,2120,713,40)
# text =  getStringInRect(70,2120,713,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# #plotSquare(900,2120,130,40)
# text =  getStringInRect(900,2120,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# #plotSquare(1130,2120,130,40)
# text =  getStringInRect(1130,2120,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(1540,2123,130,40)
# text =  getStringInRect(1540,2123,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

# plotSquare(70,2160,713,80)
# text =  getStringInRect(70,2160,713,40)
# print(text)
# print("---------------------------------------------------------------------------------------")

plotSquare(900,2180,130,40)
text =  getStringInRect(900,2160,130,40)
print(text)
print("---------------------------------------------------------------------------------------")

# #plotSquare(1130,2120,130,40)
# text =  getStringInRect(1130,2120,130,40)
# print(text)
# print("---------------------------------------------------------------------------------------")


#plotSquare(950,1150,130,40)
# text =  getStringInRect(0,460,900,60)
# print(text)
# print("---------------------------------------------------------------------------------------")
# x,y,width,height = findStringInRange(strTmpText,1000,1000,60,790)
# print("Width",width)
# print("Height",height)
